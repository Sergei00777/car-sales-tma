{% extends "base.html" %}

{% block title %}{{ car.brand }} - CHI AUTO{% endblock %}

{% block extra_css %}
<link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
<style>
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –≤–∫–ª–∞–¥–æ–∫ */
    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        padding-bottom: 100px;
    }

    .back-button {
        margin-bottom: 20px;
    }

    .back-btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        color: #b0bec5;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 215, 0, 0.2);
        padding: 12px 20px;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
        font-size: 14px;
        border: none;
    }

    .back-btn:hover {
        color: #ffd700;
        transform: translateX(-5px);
        background: rgba(255, 255, 255, 0.1);
    }

    .back-icon {
        font-size: 16px;
    }

    .car-detail {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-bottom: 30px;
    }

    .car-gallery {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .main-image {
        background: linear-gradient(135deg, #2a2f5d, #1c2145);
        border-radius: 20px;
        overflow: hidden;
        height: 400px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .main-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .image-thumbnails {
        display: flex;
        gap: 10px;
        overflow-x: auto;
        padding: 10px 0;
    }

    .thumbnail {
        flex: 0 0 auto;
        width: 80px;
        height: 60px;
        border-radius: 10px;
        overflow: hidden;
        cursor: pointer;
        background: linear-gradient(135deg, #2a2f5d, #1c2145);
        border: 2px solid transparent;
        transition: all 0.3s ease;
    }

    .thumbnail:hover {
        border-color: #ffd700;
        transform: scale(1.05);
    }

    .thumbnail img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .car-detail-info {
        background: linear-gradient(135deg, rgba(30, 35, 75, 0.9) 0%, rgba(20, 25, 55, 0.9) 100%);
        border-radius: 20px;
        padding: 30px;
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 215, 0, 0.2);
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .car-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 10px;
        flex-wrap: wrap;
        gap: 15px;
    }

    .car-title {
        font-size: 28px;
        color: #ffffff;
        margin: 0;
        line-height: 1.2;
    }

    .car-status {
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .car-status.in-stock {
        background: linear-gradient(135deg, #4caf50, #45a049);
        color: white;
    }

    .car-status.on-order {
        background: linear-gradient(135deg, #2196f3, #1976d2);
        color: white;
    }

    .car-price-large {
        font-size: 32px;
        color: #ffd700;
        font-weight: bold;
        margin: 10px 0;
        text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
    }

    /* –°–µ—Ç–∫–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ */
    .specs-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-bottom: 0;
    }

    .spec-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .spec-label {
        color: #b0bec5;
        font-size: 14px;
        font-weight: 500;
    }

    .spec-value {
        color: #ffffff;
        font-weight: 600;
        font-size: 14px;
        text-align: right;
    }

    /* –¢–∞–±—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–µ—Ç–∞–ª–µ–π */
    .car-detail-tabs {
        display: flex;
        background: rgba(20, 25, 55, 0.8);
        border-radius: 15px;
        padding: 8px;
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 215, 0, 0.2);
        margin-bottom: 30px;
        gap: 8px;
    }

    .car-tab {
        flex: 1;
        padding: 15px 20px;
        background: transparent;
        border: none;
        border-radius: 12px;
        color: #b0bec5;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .car-tab.active {
        background: linear-gradient(135deg, #ffd700, #ffed4e);
        color: #0a0f2d;
        box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
    }

    .car-tab:hover:not(.active) {
        color: #ffd700;
        background: rgba(255, 255, 255, 0.05);
    }

    /* –ö–æ–Ω—Ç–µ–Ω—Ç —Ç–∞–±–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–µ—Ç–∞–ª–µ–π */
    .detail-tab-content {
        display: none;
        animation: fadeIn 0.5s ease;
    }

    .detail-tab-content.active {
        display: block;
    }

    /* –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ */
    .detail-specs {
        background: linear-gradient(135deg, rgba(30, 35, 75, 0.9) 0%, rgba(20, 25, 55, 0.9) 100%);
        border-radius: 20px;
        padding: 25px;
        margin-bottom: 25px;
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 215, 0, 0.2);
    }

    .spec-group {
        margin-bottom: 25px;
    }

    .spec-group:last-child {
        margin-bottom: 0;
    }

    .spec-group h4 {
        color: #ffd700;
        margin-bottom: 15px;
        font-size: 18px;
    }

    .spec-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .spec-row:last-child {
        border-bottom: none;
    }

    .spec-label {
        color: #b0bec5;
        font-size: 14px;
    }

    .spec-value {
        color: #ffffff;
        font-weight: 600;
        font-size: 14px;
    }

    /* –ì–∞–ª–µ—Ä–µ—è —Ñ–æ—Ç–æ */
    .photos-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
    }

    .photo-item {
        border-radius: 15px;
        overflow: hidden;
        background: linear-gradient(135deg, #2a2f5d, #1c2145);
        height: 200px;
    }

    .photo-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
    }

    .photo-item:hover img {
        transform: scale(1.05);
    }

    /* –í–∏–¥–µ–æ */
    .videos-list {
        display: flex;
        flex-direction: column;
        gap: 30px;
    }

    .video-item {
        background: linear-gradient(135deg, rgba(30, 35, 75, 0.9) 0%, rgba(20, 25, 55, 0.9) 100%);
        border-radius: 20px;
        padding: 25px;
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 215, 0, 0.2);
    }

    .video-container {
        position: relative;
        border-radius: 12px;
        overflow: hidden;
        background: #000;
        margin-bottom: 10px;
        height: 300px;
    }

    .video-container video {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .video-loader {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.8);
        display: none;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: white;
    }

    .video-loader i {
        font-size: 32px;
        margin-bottom: 10px;
        color: #ffd700;
    }

    /* –ò—Å—Ç–æ—Ä–∏—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è */
    .history-timeline {
        position: relative;
        padding-left: 30px;
    }

    .history-timeline::before {
        content: '';
        position: absolute;
        left: 15px;
        top: 0;
        bottom: 0;
        width: 2px;
        background: linear-gradient(to bottom, #ffd700, transparent);
    }

    .history-item {
        position: relative;
        margin-bottom: 25px;
        padding: 20px;
        background: rgba(30, 35, 75, 0.6);
        border-radius: 12px;
        border-left: 3px solid #ffd700;
    }

    .history-item::before {
        content: '';
        position: absolute;
        left: -33px;
        top: 25px;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #ffd700;
    }

    .history-date {
        color: #ffd700;
        font-weight: bold;
        margin-bottom: 5px;
    }

    .history-event {
        color: #ffffff;
        margin-bottom: 8px;
    }

    .history-details {
        color: #b0bec5;
        font-size: 14px;
    }

    /* –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ */
    .features-section h3 {
        color: #ffd700;
        margin-bottom: 15px;
        font-size: 18px;
        border-bottom: 2px solid rgba(255, 215, 0, 0.3);
        padding-bottom: 5px;
    }

    .features-grid {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    .feature-item {
        display: flex;
        align-items: center;
        gap: 10px;
        color: #ffffff;
        font-size: 14px;
        padding: 8px 12px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 8px;
        border-left: 3px solid #4caf50;
    }

    .feature-icon {
        color: #4caf50;
        font-weight: bold;
        font-size: 16px;
    }

    /* –û–ø–∏—Å–∞–Ω–∏–µ */
    .description-section h3 {
        color: #ffd700;
        margin-bottom: 15px;
        font-size: 18px;
        border-bottom: 2px solid rgba(255, 215, 0, 0.3);
        padding-bottom: 5px;
    }

    /* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */
    .action-buttons {
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-top: 20px;
    }

    .contact-btn, .test-drive-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        padding: 16px 24px;
        border: none;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        width: 100%;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .contact-btn {
        background: linear-gradient(135deg, #2196f3, #1976d2);
        color: white;
        box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
    }

    .test-drive-btn {
        background: linear-gradient(135deg, #4caf50, #45a049);
        color: white;
        box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
    }

    .contact-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(33, 150, 243, 0.4);
    }

    .test-drive-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
    }

    .btn-icon {
        font-size: 20px;
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
    @media (max-width: 768px) {
        .container {
            padding: 15px;
        }

        .car-detail {
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .main-image {
            height: 300px;
        }

        .car-detail-info {
            padding: 20px;
        }

        .car-title {
            font-size: 24px;
        }

        .car-price-large {
            font-size: 28px;
        }

        .car-detail-tabs {
            flex-direction: column;
        }

        .photos-grid {
            grid-template-columns: 1fr;
        }

        .specs-grid {
            grid-template-columns: 1fr;
        }

        .spec-row {
            flex-direction: column;
            align-items: flex-start;
            gap: 5px;
        }

        .video-container {
            height: 200px;
        }

        .history-timeline {
            padding-left: 20px;
        }

        .history-item::before {
            left: -23px;
        }

        .car-header {
            flex-direction: column;
            align-items: flex-start;
        }

        .spec-item {
            padding: 8px 0;
        }
    }

    @media (max-width: 480px) {
        .car-detail-info {
            padding: 15px;
        }

        .car-title {
            font-size: 20px;
        }

        .car-price-large {
            font-size: 24px;
        }

        .contact-btn, .test-drive-btn {
            padding: 15px 20px;
            font-size: 14px;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
    <div class="back-button">
        <button class="back-btn" onclick="goBack()">
            <div class="back-icon">‚Üê</div>
            –ù–∞–∑–∞–¥
        </button>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
    <div class="car-detail">
        <div class="car-gallery">
            <div class="main-image">
                <img src="{{ url_for('static', filename=car.images[0]) }}" alt="{{ car.brand }}" onerror="this.style.display='none'">
            </div>
            <div class="image-thumbnails">
                {% for image in car.images %}
                <div class="thumbnail">
                    <img src="{{ url_for('static', filename=image) }}" alt="{{ car.brand }}" onerror="this.style.display='none'">
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="car-detail-info">
            <div class="car-header">
                <h1 class="car-title">{{ car.brand }}</h1>
                <div class="car-status {{ car.status_class }}">{{ car.status }}</div>
            </div>

            <div class="car-price-large">{{ car.price }} ‚ÇΩ</div>

            <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
            <div class="specs-grid">
                <div class="spec-item">
                    <span class="spec-label">–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:</span>
                    <span class="spec-value">{{ car.year }}</span>
                </div>
                <div class="spec-item">
                    <span class="spec-label">–î–≤–∏–≥–∞—Ç–µ–ª—å:</span>
                    <span class="spec-value">{{ car.engine }}</span>
                </div>
                <div class="spec-item">
                    <span class="spec-label">–ö–æ—Ä–æ–±–∫–∞:</span>
                    <span class="spec-value">{{ car.transmission }}</span>
                </div>
                <div class="spec-item">
                    <span class="spec-label">–ü—Ä–∏–≤–æ–¥:</span>
                    <span class="spec-value">{{ car.drive }}</span>
                </div>
                <div class="spec-item">
                    <span class="spec-label">–ü—Ä–æ–±–µ–≥:</span>
                    <span class="spec-value">{{ car.mileage }}</span>
                </div>
                <div class="spec-item">
                    <span class="spec-label">–¶–≤–µ—Ç:</span>
                    <span class="spec-value">{{ car.color }}</span>
                </div>
            </div>

            <!-- –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ -->
            <div class="features-section">
                <h3>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏</h3>
                <div class="features-grid">
                    {% for feature in car.features %}
                    <div class="feature-item">
                        <span class="feature-icon">‚úì</span>
                        {{ feature }}
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
            <div class="description-section">
                <h3>–û–ø–∏—Å–∞–Ω–∏–µ</h3>
                <p style="color: #b0bec5; line-height: 1.6;">{{ car.description }}</p>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="action-buttons">
                <button class="contact-btn" onclick="showContactForm()">
                    <span class="btn-icon">üìû</span>
                    –°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
                </button>
                <button class="test-drive-btn" onclick="requestTestDrive()">
                    <span class="btn-icon">üöó</span>
                    –ó–∞–ø–∏—Å—å –Ω–∞ —Ç–µ—Å—Ç-–¥—Ä–∞–π–≤
                </button>
            </div>
        </div>
    </div>

    <!-- –¢–∞–±—ã –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤ -->
    <div class="car-detail-tabs">
        <button class="car-tab active" onclick="openTab('info')">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</button>
        <button class="car-tab" onclick="openTab('history')">–ò—Å—Ç–æ—Ä–∏—è</button>
        <button class="car-tab" onclick="openTab('photos')">–§–æ—Ç–æ</button>
        <button class="car-tab" onclick="openTab('videos')">–í–∏–¥–µ–æ</button>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Ç–∞–±–æ–≤ -->
    <div id="info" class="detail-tab-content active">
        <div class="detail-specs">
            <div class="spec-group">
                <h4>–û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h4>
                <div class="spec-row">
                    <span class="spec-label">–ú–∞—Ä–∫–∞ –∏ –º–æ–¥–µ–ª—å</span>
                    <span class="spec-value">{{ car.brand }}</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞</span>
                    <span class="spec-value">{{ car.year }}</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">–ü—Ä–æ–±–µ–≥</span>
                    <span class="spec-value">{{ car.mileage }}</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">–°–æ—Å—Ç–æ—è–Ω–∏–µ</span>
                    <span class="spec-value">–ò–¥–µ–∞–ª—å–Ω–æ–µ</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">–ö—É–∑–æ–≤</span>
                    <span class="spec-value">–ö—Ä–æ—Å—Å–æ–≤–µ—Ä</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">–†—É–ª—å</span>
                    <span class="spec-value">–õ–µ–≤—ã–π</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">–¶–≤–µ—Ç</span>
                    <span class="spec-value">{{ car.color }}</span>
                </div>
            </div>

            <div class="spec-group">
                <h4>–î–≤–∏–≥–∞—Ç–µ–ª—å</h4>
                <div class="spec-row">
                    <span class="spec-label">–¢–∏–ø –¥–≤–∏–≥–∞—Ç–µ–ª—è</span>
                    <span class="spec-value">–ë–µ–Ω–∑–∏–Ω–æ–≤—ã–π</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">–û–±—ä–µ–º</span>
                    <span class="spec-value">1.5 –ª</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">–ú–æ—â–Ω–æ—Å—Ç—å</span>
                    <span class="spec-value">150 –ª.—Å.</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">–ö—Ä—É—Ç—è—â–∏–π –º–æ–º–µ–Ω—Ç</span>
                    <span class="spec-value">255 –ù¬∑–º</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">–¢—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è</span>
                    <span class="spec-value">7-—Å—Ç—É–ø–µ–Ω—á–∞—Ç–∞—è —Ä–æ–±–æ—Ç</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">–ü—Ä–∏–≤–æ–¥</span>
                    <span class="spec-value">–ü–µ—Ä–µ–¥–Ω–∏–π</span>
                </div>
            </div>

            <div class="spec-group">
                <h4>–≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏</h4>
                <div class="spec-row">
                    <span class="spec-label">–†–∞–∑–≥–æ–Ω 0-100 –∫–º/—á</span>
                    <span class="spec-value">8.9 —Å–µ–∫</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å</span>
                    <span class="spec-value">190 –∫–º/—á</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">–†–∞—Å—Ö–æ–¥ —Ç–æ–ø–ª–∏–≤–∞</span>
                    <span class="spec-value">7.2 –ª/100–∫–º</span>
                </div>
            </div>

            <div class="spec-group">
                <h4>–ö–æ–º—Ñ–æ—Ä—Ç –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h4>
                <div class="spec-row">
                    <span class="spec-label">–ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä</span>
                    <span class="spec-value">–ö–ª–∏–º–∞—Ç-–∫–æ–Ω—Ç—Ä–æ–ª—å</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">–ö—Ä—É–∏–∑-–∫–æ–Ω—Ç—Ä–æ–ª—å</span>
                    <span class="spec-value">–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">–ü–∞—Ä–∫–æ–≤–æ—á–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∏</span>
                    <span class="spec-value">–ü–µ—Ä–µ–¥–Ω–∏–µ –∏ –∑–∞–¥–Ω–∏–µ</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">–ö–∞–º–µ—Ä–∞ –∑–∞–¥–Ω–µ–≥–æ –≤–∏–¥–∞</span>
                    <span class="spec-value">360¬∞</span>
                </div>
                <div class="spec-row">
                    <span class="spec-label">–°–∏—Å—Ç–µ–º–∞ –ø–æ–º–æ—â–∏</span>
                    <span class="spec-value">ABS, ESP, Lane Assist</span>
                </div>
            </div>
        </div>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ -->
    <div id="history" class="detail-tab-content">
        <div class="detail-specs">
            <h3 style="color: #ffd700; margin-bottom: 20px;">–ò—Å—Ç–æ—Ä–∏—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è</h3>
            <div class="history-timeline">
                <div class="history-item">
                    <div class="history-date">–ú–∞—Ä—Ç 2024</div>
                    <div class="history-event">–ü–ª–∞–Ω–æ–≤–æ–µ –¢–û</div>
                    <div class="history-details">–ó–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º</div>
                </div>
                <div class="history-item">
                    <div class="history-date">–î–µ–∫–∞–±—Ä—å 2023</div>
                    <div class="history-event">–ó–∞–º–µ–Ω–∞ —à–∏–Ω</div>
                    <div class="history-details">–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∑–∏–º–Ω—è—è —Ä–µ–∑–∏–Ω–∞</div>
                </div>
                <div class="history-item">
                    <div class="history-date">–°–µ–Ω—Ç—è–±—Ä—å 2023</div>
                    <div class="history-event">–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ö–æ–¥–æ–≤–æ–π</div>
                    <div class="history-details">–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–≤–µ—Å–∫–∏ –∏ —Ç–æ—Ä–º–æ–∑–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã</div>
                </div>
                <div class="history-item">
                    <div class="history-date">–ò—é–Ω—å 2023</div>
                    <div class="history-event">–ü–æ–∫—É–ø–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è</div>
                    <div class="history-details">–ê–≤—Ç–æ–º–æ–±–∏–ª—å –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω —É –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –¥–∏–ª–µ—Ä–∞</div>
                </div>
            </div>
        </div>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ —Ñ–æ—Ç–æ -->
    <div id="photos" class="detail-tab-content">
        <div class="detail-specs">
            <h3 style="color: #ffd700; margin-bottom: 20px;">–ì–∞–ª–µ—Ä–µ—è —Ñ–æ—Ç–æ</h3>
            <div class="photos-grid">
                <div class="photo-item">
                    <img src="{{ url_for('static', filename='images/geely_coolray_ext1.jpg') }}" alt="Geely Coolray - –í–∏–¥ —Å–ø–µ—Ä–µ–¥–∏" onerror="this.style.display='none'">
                </div>
                <div class="photo-item">
                    <img src="{{ url_for('static', filename='images/geely_coolray_ext2.jpg') }}" alt="Geely Coolray - –í–∏–¥ —Å–±–æ–∫—É" onerror="this.style.display='none'">
                </div>
                <div class="photo-item">
                    <img src="{{ url_for('static', filename='images/geely_coolray_int1.jpg') }}" alt="Geely Coolray - –°–∞–ª–æ–Ω" onerror="this.style.display='none'">
                </div>
                <div class="photo-item">
                    <img src="{{ url_for('static', filename='images/geely_coolray_int2.jpg') }}" alt="Geely Coolray - –ü–∞–Ω–µ–ª—å –ø—Ä–∏–±–æ—Ä–æ–≤" onerror="this.style.display='none'">
                </div>
                <div class="photo-item">
                    <img src="{{ url_for('static', filename='images/geely_coolray_ext3.jpg') }}" alt="Geely Coolray - –í–∏–¥ —Å–∑–∞–¥–∏" onerror="this.style.display='none'">
                </div>
                <div class="photo-item">
                    <img src="{{ url_for('static', filename='images/geely_coolray_engine.jpg') }}" alt="Geely Coolray - –î–≤–∏–≥–∞—Ç–µ–ª—å" onerror="this.style.display='none'">
                </div>
            </div>
        </div>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ –≤–∏–¥–µ–æ -->
    <div id="videos" class="detail-tab-content">
        <div class="detail-specs">
            <h3 style="color: #ffd700; margin-bottom: 20px;">–í–∏–¥–µ–æ–æ–±–∑–æ—Ä—ã</h3>
            <div class="videos-list">
                <div class="video-item">
                    <div class="video-container">
                        <video controls poster="{{ url_for('static', filename='images/geely_video_thumb1.jpg') }}">
                            <source src="{{ url_for('static', filename='videos/geely_overview.mp4') }}" type="video/mp4">
                            –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ —Ç–µ–≥.
                        </video>
                    </div>
                    <h4 style="color: white; margin-bottom: 10px;">–û–±–∑–æ—Ä Geely Coolray 2023</h4>
                    <p style="color: #b0bec5;">–ü–æ–ª–Ω—ã–π –æ–±–∑–æ—Ä –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª—è</p>
                </div>
                <div class="video-item">
                    <div class="video-container">
                        <video controls poster="{{ url_for('static', filename='images/geely_video_thumb2.jpg') }}">
                            <source src="{{ url_for('static', filename='videos/geely_test_drive.mp4') }}" type="video/mp4">
                            –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ —Ç–µ–≥.
                        </video>
                    </div>
                    <h4 style="color: white; margin-bottom: 10px;">–¢–µ—Å—Ç-–¥—Ä–∞–π–≤ –≤ –≥–æ—Ä–æ–¥—Å–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö</h4>
                    <p style="color: #b0bec5;">–ü–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –≤ –≥–æ—Ä–æ–¥–µ</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
<div id="modalContainer"></div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
    function goBack() {
        window.history.back();
    }

    function showContactForm() {
        alert('–§–æ—Ä–º–∞ —Å–≤—è–∑–∏ —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –ø–æ –∞–≤—Ç–æ: {{ car.brand }}');
    }

    function requestTestDrive() {
        alert('–ó–∞–ø–∏—Å—å –Ω–∞ —Ç–µ—Å—Ç-–¥—Ä–∞–π–≤: {{ car.brand }}');
    }

    // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–∞–±–æ–≤
    function openTab(tabName) {
        // –°–∫—Ä—ã—Ç—å –≤—Å–µ —Ç–∞–±—ã
        const tabContents = document.getElementsByClassName('detail-tab-content');
        for (let i = 0; i < tabContents.length; i++) {
            tabContents[i].classList.remove('active');
        }

        // –£–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
        const tabButtons = document.getElementsByClassName('car-tab');
        for (let i = 0; i < tabButtons.length; i++) {
            tabButtons[i].classList.remove('active');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–∞–± –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É
        document.getElementById(tabName).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –Ω–∞ –º–∏–Ω–∏–∞—Ç—é—Ä—ã
    document.addEventListener('DOMContentLoaded', function() {
        const thumbnails = document.querySelectorAll('.thumbnail img');
        const mainImage = document.querySelector('.main-image img');

        thumbnails.forEach(thumb => {
            thumb.addEventListener('click', function() {
                mainImage.src = this.src;
            });
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ
        const videos = document.querySelectorAll('video');
        videos.forEach(video => {
            video.addEventListener('loadstart', function() {
                this.nextElementSibling.style.display = 'flex';
            });

            video.addEventListener('canplay', function() {
                this.nextElementSibling.style.display = 'none';
            });
        });
    });
</script>
{% endblock %}