{% extends "base.html" %}

{% block title %}{{ car.brand }} - CHI AUTO{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='car-detail.css') }}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="back-button">
        <button class="back-btn" onclick="goBack()">
            <div class="back-icon">‚Üê</div>
            –ù–∞–∑–∞–¥
        </button>
    </div>

    <div class="car-detail">
        <!-- –ì–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
        <div class="car-gallery">
            <div class="main-image">
                <img src="{{ url_for('static', filename=car.images[0]) }}" alt="{{ car.brand }}" onerror="this.style.display='none'">
            </div>
            <div class="image-thumbnails">
                {% for image in car.images %}
                <div class="thumbnail">
                    <img src="{{ url_for('static', filename=image) }}" alt="{{ car.brand }}" onerror="this.style.display='none'">
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="car-detail-info">
            <div class="car-header">
                <h1 class="car-title">{{ car.brand }}</h1>
                <div class="car-status {{ car.status_class }}">{{ car.status }}</div>
            </div>

            <div class="car-price-large">{{ car.price }} ‚ÇΩ</div>

            <!-- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
            <div class="specs-grid">
                <div class="spec-item">
                    <span class="spec-label">–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:</span>
                    <span class="spec-value">{{ car.year }}</span>
                </div>
                <div class="spec-item">
                    <span class="spec-label">–î–≤–∏–≥–∞—Ç–µ–ª—å:</span>
                    <span class="spec-value">{{ car.engine }}</span>
                </div>
                <div class="spec-item">
                    <span class="spec-label">–ö–æ—Ä–æ–±–∫–∞:</span>
                    <span class="spec-value">{{ car.transmission }}</span>
                </div>
                <div class="spec-item">
                    <span class="spec-label">–ü—Ä–∏–≤–æ–¥:</span>
                    <span class="spec-value">{{ car.drive }}</span>
                </div>
                <div class="spec-item">
                    <span class="spec-label">–ü—Ä–æ–±–µ–≥:</span>
                    <span class="spec-value">{{ car.mileage }}</span>
                </div>
                <div class="spec-item">
                    <span class="spec-label">–¶–≤–µ—Ç:</span>
                    <span class="spec-value">{{ car.color }}</span>
                </div>
            </div>

            <!-- –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ -->
            <div class="features-section">
                <h3>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏</h3>
                <div class="features-grid">
                    {% for feature in car.features %}
                    <div class="feature-item">
                        <span class="feature-icon">‚úì</span>
                        {{ feature }}
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
            <div class="description-section">
                <h3>–û–ø–∏—Å–∞–Ω–∏–µ</h3>
                <p style="color: #b0bec5; line-height: 1.6;">{{ car.description }}</p>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="action-buttons">
                <button class="contact-btn" onclick="showContactForm()">
                    <span class="btn-icon">üìû</span>
                    –°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
                </button>
                <button class="test-drive-btn" onclick="requestTestDrive()">
                    <span class="btn-icon">üöó</span>
                    –ó–∞–ø–∏—Å—å –Ω–∞ —Ç–µ—Å—Ç-–¥—Ä–∞–π–≤
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
    function goBack() {
        window.history.back();
    }

    function showContactForm() {
        alert('–§–æ—Ä–º–∞ —Å–≤—è–∑–∏ —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –ø–æ –∞–≤—Ç–æ: {{ car.brand }}');
    }

    function requestTestDrive() {
        alert('–ó–∞–ø–∏—Å—å –Ω–∞ —Ç–µ—Å—Ç-–¥—Ä–∞–π–≤: {{ car.brand }}');
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –Ω–∞ –º–∏–Ω–∏–∞—Ç—é—Ä—ã
    document.addEventListener('DOMContentLoaded', function() {
        const thumbnails = document.querySelectorAll('.thumbnail img');
        const mainImage = document.querySelector('.main-image img');

        thumbnails.forEach(thumb => {
            thumb.addEventListener('click', function() {
                mainImage.src = this.src;
            });
        });
    });
</script>
{% endblock %}